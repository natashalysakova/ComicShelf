@page "/"
@using ComicShelf.Localization;
@using Microsoft.AspNetCore.Mvc.Localization;
@using Newtonsoft.Json;
@model ComicShelf.Pages.Volumes.IndexModel
@inject IHtmlLocalizer<SharedResource> Localizer

@{
    ViewData["Title"] = Localizer["MainPage"];
}

<div class="row">
    <div class="col-lg-3 col-xl-2">
        <div class="row single-button">
            <button class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#createModal">@Localizer["AddNewVolume"]</button>
        </div>



        <div class="row" id="filters">

            @{
                var filters = Model.FromCookies();
            }

            <span class="filter-header">@Localizer["PurchaseStatus"]</span>

            <div class="btn-group-vertical mb-3" role="group" aria-label="purchse status filters">
                @foreach (var item in ViewData["PurchaseFilters"] as IEnumerable<PurchaseFilterEnum>)
                {
                    var check = filters.filter == @item ? "checked" : string.Empty;

                    <input id="Purchase_@item" class="btn-check filter" type="radio" name="filter" autocomplete="off" data="@item" @check />
                    <label for="Purchase_@item" class="btn btn-secondary">
                        @Localizer[item.ToString()]
                    </label>
                }

            </div>
            <span class="filter-header">@Localizer["Digitality"]</span>
            <div class="btn-group-vertical mb-3" role="group" aria-la bel="digitiality filters">
                @foreach (var item in ViewData["DigitalityFilters"] as IEnumerable<DigitalityEnum>)
                {
                    var check = filters.digitality == @item ? "checked" : string.Empty;

                    <input id="Digitality_@item" class="btn-check filter" type="radio" name="digitality" autocomplete="off" data="@item" @check />
                    <label for="Digitality_@item" class="btn btn-secondary">
                        @Localizer[item.ToString()]
                    </label>
                }
            </div>
            <span class="filter-header">@Localizer["ReadingStatus"]</span>
            <div class="btn-group-vertical mb-3" role="group" aria-la bel="reading filters">
                @foreach (var item in ViewData["ReadingFilters"] as IEnumerable<ReadingEnum>)
                {
                    var check = filters.reading == @item ? "checked" : string.Empty;

                    <input id="Reading_@item" class="btn-check filter" type="radio" name="reading" autocomplete="off" data="@item" @check />
                    <label for="Reading_@item" class="btn btn-secondary">
                        @Localizer[item.ToString()]
                    </label>
                }
            </div>
        </div>
        <div class="row single-button">
            <button class="btn btn-outline-danger mb-3" onclick="resetFilters()">@Localizer["Reset"]</button>
        </div>

    </div>
    <div class="col-lg-9 col-xl-10">
        <div class="row mb-3 col-lg-6 offset-lg-6">
            <div class="col">
                <div class="input-group">
                    <input id="search-field" type="search" class="form-control filter half-transparent" placeholder="@Localizer["Search"]" aria-label="Search" aria-describedby="button-addon2">
                </div>
            </div>
            <div class="col">

                <div class="input-group col">

                    <select id="sortType" class="form-select half-transparent" aria-label="Default select example" asp-for="@filters.sort">
                        @foreach (var item in ViewData["Sort"] as IEnumerable<SortEnum>)
                        {
                            <option value="@item" class="bg-secondary">@Localizer["" + item]</option>
                        }
                        @*                            <option value="0">@Localizer["ByCreationDate"]</option>
                        <option value="1">@Localizer["ByTitle"]</option>
                        <option value="2" selected>@Localizer["ByPurchaseDate"]</option>
                        *@
                    </select>
                    <button id="sortDirection" class="btn btn-secondary" data-sort="up">
                        <i class="bi bi-sort-up"></i>
                    </button>
                </div>
            </div>

        </div>
        <div class="row" id="shelves">
            <partial name="_ShelfPartial" model="@Model.Volumes" view-data="@ViewData" />
        </div>

    </div>
</div>








@section Scripts {

    <div class="modal fade" id="detailModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content" id="detail-modal-content">
            </div>
        </div>
    </div>

    <div class="modal fade" id="createModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-backdrop="static">
        <partial name="CreatePartial" />
    </div>

    <script src="~/js/Volume.js"></script>
    <script>
        completed = (res) => {
            alert('Posted using Unobtrusive AJAX');
        };
    </script>
}